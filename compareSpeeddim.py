d=[10,110,210,310,410,510,610,710,810,910,1010,1110,1210,1310,1410,1510,1610,
1710,1810,1910,2010,2110,2210,2310,2410]
gpu1 = [17.082101,19.302316,25.87218,28.465258,38.893352,46.273381,67.177241,
78.049432,93.285139,108.112568,122.698527,155.802035,172.951571,198.074203,
223.420808,245.507346,292.315117,313.958356,352.926231,379.080413,423.59217,
461.854512,500.618391,550.790096,590.389249]
gpu2 = [17.084055,19.379793,26.159857,28.755278,38.839059,46.665336,67.417721,
78.246133,93.423758,108.826476,123.299072,155.580289,172.712935,197.944869,
223.348466,246.716349,292.11994,313.781779,353.209799,378.747235,423.135625,
463.082117,500.720812,550.663054,590.143667]
gpu3 = [17.203035,19.487693,26.221188,28.380267,38.597641,46.339325,67.247956,
78.113519,93.247006,108.269186,122.703649,155.886765,173.155596,197.974901,
223.505402,245.403295,292.433943,314.029308,352.952874,379.05795,423.625492,
461.926066,500.917031,551.023199,590.321234]
gpu4 = [17.026024,19.310221,26.060214,28.501753,38.644287,46.292919,67.178153,
77.907379,92.902505,108.194202,122.498534,155.465175,173.026315,198.025985,
223.233335,245.683221,292.240056,314.246262,353.28017,379.088917,423.761442,
461.939006,500.56212,551.32696,590.240353]
gpu5 = [17.013434,19.332969,26.582878,27.76733,38.666938,46.113755,67.300748,
77.998254,93.171073,108.18355,122.98351,155.928392,173.602282,198.282153,
223.474844,245.87368,293.159481,314.881358,353.98514,379.953951,422.499399,
461.709612,501.261511,551.133218,590.200111]


cpu1 = [10.076292,5.01987,8.556161,14.832199,22.542567,34.013149,49.965766,
66.660089,87.899632,111.169005,136.950873,163.913975,194.086135,224.784086,
265.118868,303.485074,347.530603,391.331319,437.920194,484.092959,525.663594,
585.693028,654.8369,713.073043,778.084118]
cpu2 = [10.184674,5.049389,8.535971,14.778667,22.456396,34.062749,52.85383,
66.675292,86.866815,111.187892,136.803605,163.710707,188.411393,223.752824,
263.97422,301.100797,347.125345,390.582591,436.209554,486.302304,522.37184,
584.477899,653.396819,710.655067,774.725287]
cpu3 = [10.203486,5.046693,8.497481,14.795074,22.650001,33.97755,49.8106,
66.881965,86.998109,110.372988,136.784088,164.223065,188.870536,223.93176,
264.559899,301.360683,348.239689,393.275099,437.29717,483.336831,524.464101,
585.615845,654.28509,712.474753,776.519005]
cpu4 = [10.662225,4.539345,8.485564,14.829287,22.469616,33.532077,49.669397,
66.717398,88.205551,109.46165,136.491689,163.436522,188.269946,223.761083,
263.984397,300.738337,348.621096,391.973956,435.322146,483.114053,522.603963,
584.860429,653.666094,710.967608,775.285443]
cpu5 = [10.71786,4.596753,8.578585,14.839384,22.535268,34.074792,52.850044,
66.81707,88.313965,109.546055,136.928437,163.901731,188.834112,224.140518,
263.998687,300.7101,349.733843,393.300883,436.689814,483.408102,523.270705,
585.266455,653.356052,711.035413,776.474744]

cpuavg= [(cpu1[i]+cpu2[i]+cpu3[i]+cpu4[i]+cpu5[i])/5.0 for i in range(len(d))]
gpuavg= [(gpu1[i]+gpu2[i]+gpu3[i]+gpu4[i]+gpu5[i])/5.0 for i in range(len(d))]



import pylab
import numpy as np

xp = np.linspace(10, 3000, 100)


pylab.plot(d,cpu1,'xb')
pylab.plot(d,cpu2,'xb')
pylab.plot(d,cpu3,'xb')
pylab.plot(d,cpu4,'xb')
pylab.plot(d,cpu5,'xb')

z = np.polyfit(d,cpuavg , 2)
#pylab.plot(d,cpuavg,'b--')
p = np.poly1d(z)
pylab.plot(xp,p(xp),'b-',label="CPU y="+str(z[0])[:5]+"+"+str(z[1])[:5]+"x"+
'+'+str(z[2])[:5]+"x^2")

pylab.plot(d,gpu1,'xg')
pylab.plot(d,gpu2,'xg')
pylab.plot(d,gpu3,'xg')
pylab.plot(d,gpu4,'xg')
pylab.plot(d,gpu5,'xg')

z = np.polyfit(d,gpuavg , 2)
p = np.poly1d(z)
pylab.plot(xp,p(xp),'g-',label="GPU y="+str(z[0])[:5]+"+"+str(z[1])[:5]+"x"+
'+'+str(z[2])[:5]+"x^2")

#pylab.plot(d,gpuavg,'--')
avg = [x[0]/x[1] for x in zip(gpuavg,cpuavg)] 

#pylab.plot(d,avg)

pylab.title("Theano GPU vs CPU\n Varying Dimensions")
pylab.legend(loc="upper left");
pylab.ylabel("time(s)")
pylab.xlabel("dimensions")
pylab.show()
